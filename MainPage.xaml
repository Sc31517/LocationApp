<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="LocationTrackingApp.MainPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:maps="clr-namespace:Microsoft.Maui.Controls.Maps;assembly=Microsoft.Maui.Controls.Maps"
             xmlns:controls="clr-namespace:LocationTrackingApp.Controls"
             Title="Location Tracking">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Map with Heat Map Circles -->
        <maps:Map x:Name="LocationMap" 
                  Grid.Row="0"
                  IsShowingUser="True"
                  MapType="Street" />

        <!-- Control Panel -->
        <Frame Grid.Row="1" 
               BackgroundColor="White" 
               Padding="20" 
               CornerRadius="0">
            <VerticalStackLayout Spacing="15">
                
                <!-- Status Information -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    
                    <Label Grid.Column="0" 
                           Text="{Binding LocationPointCount, StringFormat='Points: {0}'}"
                           FontSize="16"
                           FontAttributes="Bold"
                           VerticalOptions="Center" />
                    
                    <Label Grid.Column="1" 
                           Text="{Binding IsTracking, StringFormat='Status: {0}'}"
                           FontSize="16"
                           VerticalOptions="Center"
                           HorizontalOptions="End" />
                </Grid>

                <!-- Control Buttons -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    
                    <Button Grid.Column="0"
                            Text="{Binding TrackingButtonText}"
                            Command="{Binding StartStopTrackingCommand}"
                            BackgroundColor="#4CAF50"
                            TextColor="White"
                            FontAttributes="Bold" />
                    
                    <Button Grid.Column="1"
                            Text="Refresh"
                            Command="{Binding RefreshMapCommand}"
                            BackgroundColor="#2196F3"
                            TextColor="White"
                            Margin="5,0" />
                    
                    <Button Grid.Column="2"
                            Text="Clear"
                            Command="{Binding ClearDataCommand}"
                            BackgroundColor="#F44336"
                            TextColor="White" />
                </Grid>
                
            </VerticalStackLayout>
        </Frame>
    </Grid>

</ContentPage>
